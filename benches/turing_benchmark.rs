// MODIFIED: Use the standard library's black_box and import PyDict
use std::hint::black_box;
use pyo3::types::PyDict;

// MODIFIED: Removed `black_box` from this import
use criterion::{criterion_group, criterion_main, Criterion};
use pyo3::prelude::*;

// This line is correct and will work once other errors are fixed.
use logic_mill_rs::core::{LogicMill as RustLogicMill, parse_transition_rules as rust_parse_rules};

const RULES: &str = r#"
DEC_10 _ DEC_10 _ R
DEC_10 | SUB_12 Ʌ R
DEC_100 _ DEC_100 _ R
DEC_100 | SUB_102 ʟ R
DEC_102 _ DEC_102 _ R
DEC_102 | SUB_104 ʡ R
DEC_104 _ DEC_104 _ R
DEC_104 | SUB_106 ʣ R
DEC_106 _ DEC_106 _ R
DEC_106 | SUB_108 ʥ R
DEC_108 _ DEC_108 _ R
DEC_108 | SUB_110 ʧ R
DEC_110 _ DEC_110 _ R
DEC_110 | SUB_112 ʩ R
DEC_112 _ DEC_112 _ R
DEC_112 | SUB_114 ʫ R
DEC_114 _ DEC_114 _ R
DEC_114 | SUB_116 ʭ R
DEC_116 _ DEC_116 _ R
DEC_116 | SUB_118 ʯ R
DEC_118 _ DEC_118 _ R
DEC_118 | SUB_120 ʱ R
DEC_12 _ DEC_12 _ R
DEC_12 | SUB_14 ɇ R
DEC_120 _ DEC_120 _ R
DEC_120 | SUB_122 ʳ R
DEC_122 _ DEC_122 _ R
DEC_122 | SUB_124 ʵ R
DEC_124 _ DEC_124 _ R
DEC_124 | SUB_126 ʷ R
DEC_126 _ DEC_126 _ R
DEC_126 | SUB_128 ʹ R
DEC_128 _ DEC_128 _ R
DEC_128 | SUB_130 ʻ R
DEC_130 _ DEC_130 _ R
DEC_130 | SUB_132 ʽ R
DEC_132 _ DEC_132 _ R
DEC_132 | SUB_134 ʿ R
DEC_134 _ DEC_134 _ R
DEC_134 | SUB_136 ˁ R
DEC_136 _ DEC_136 _ R
DEC_136 | SUB_138 ˃ R
DEC_138 _ DEC_138 _ R
DEC_138 | SUB_140 ˅ R
DEC_14 _ DEC_14 _ R
DEC_14 | SUB_16 ɉ R
DEC_140 _ DEC_140 _ R
DEC_140 | SUB_142 ˇ R
DEC_142 _ DEC_142 _ R
DEC_142 | SUB_144 ˉ R
DEC_144 _ DEC_144 _ R
DEC_144 | SUB_146 ˋ R
DEC_146 _ DEC_146 _ R
DEC_146 | SUB_148 ˍ R
DEC_148 _ DEC_148 _ R
DEC_148 | SUB_150 ˏ R
DEC_150 _ DEC_150 _ R
DEC_150 | SUB_152 ˑ R
DEC_152 _ DEC_152 _ R
DEC_152 | SUB_154 ˓ R
DEC_154 _ DEC_154 _ R
DEC_154 | SUB_156 ˕ R
DEC_156 _ DEC_156 _ R
DEC_156 | SUB_158 ˗ R
DEC_158 _ DEC_158 _ R
DEC_158 | SUB_160 ˙ R
DEC_16 _ DEC_16 _ R
DEC_16 | SUB_18 ɋ R
DEC_160 _ DEC_160 _ R
DEC_160 | SUB_162 ˛ R
DEC_162 _ DEC_162 _ R
DEC_162 | SUB_164 ˝ R
DEC_164 _ DEC_164 _ R
DEC_164 | SUB_166 ˟ R
DEC_166 _ DEC_166 _ R
DEC_166 | SUB_168 ˡ R
DEC_168 _ DEC_168 _ R
DEC_168 | SUB_170 ˣ R
DEC_170 _ DEC_170 _ R
DEC_170 | SUB_172 ˥ R
DEC_172 _ DEC_172 _ R
DEC_172 | SUB_174 ˧ R
DEC_174 _ DEC_174 _ R
DEC_174 | SUB_176 ˩ R
DEC_176 _ DEC_176 _ R
DEC_176 | SUB_178 ˫ R
DEC_178 _ DEC_178 _ R
DEC_178 | SUB_180 ˭ R
DEC_18 _ DEC_18 _ R
DEC_18 | SUB_20 ɍ R
DEC_180 _ DEC_180 _ R
DEC_180 | SUB_182 ˯ R
DEC_182 _ DEC_182 _ R
DEC_182 | SUB_184 ˱ R
DEC_184 _ DEC_184 _ R
DEC_184 | SUB_186 ˳ R
DEC_186 _ DEC_186 _ R
DEC_186 | SUB_188 ˵ R
DEC_188 _ DEC_188 _ R
DEC_188 | SUB_190 ˷ R
DEC_190 _ DEC_190 _ R
DEC_190 | SUB_192 ˹ R
DEC_192 _ DEC_192 _ R
DEC_192 | SUB_194 ˻ R
DEC_194 _ DEC_194 _ R
DEC_194 | SUB_196 ˽ R
DEC_196 _ DEC_196 _ R
DEC_196 | SUB_198 ˿ R
DEC_198 _ DEC_198 _ R
DEC_198 | SUB_200 ͱ R
DEC_2 _ DEC_2 _ R
DEC_2 | SUB_4 Ƚ R
DEC_20 _ DEC_20 _ R
DEC_20 | SUB_22 ɏ R
DEC_200 _ DEC_200 _ R
DEC_200 | SUB_202 ͳ R
DEC_202 _ DEC_202 _ R
DEC_202 | SUB_204 ͵ R
DEC_204 _ DEC_204 _ R
DEC_204 | SUB_206 ͷ R
DEC_206 _ DEC_206 _ R
DEC_206 | SUB_208 ͻ R
DEC_208 _ DEC_208 _ R
DEC_208 | SUB_210 ͽ R
DEC_210 _ DEC_210 _ R
DEC_210 | SUB_212 Ϳ R
DEC_212 _ DEC_212 _ R
DEC_212 | SUB_214 ΅ R
DEC_214 _ DEC_214 _ R
DEC_214 | SUB_216 · R
DEC_216 _ DEC_216 _ R
DEC_216 | SUB_218 Ή R
DEC_218 _ DEC_218 _ R
DEC_218 | SUB_220 Ό R
DEC_22 _ DEC_22 _ R
DEC_22 | SUB_24 ɑ R
DEC_220 _ DEC_220 _ R
DEC_220 | SUB_222 Ώ R
DEC_222 _ DEC_222 _ R
DEC_222 | SUB_224 Α R
DEC_224 _ DEC_224 _ R
DEC_224 | SUB_226 Γ R
DEC_226 _ DEC_226 _ R
DEC_226 | SUB_228 Ε R
DEC_228 _ DEC_228 _ R
DEC_228 | SUB_230 Η R
DEC_230 _ DEC_230 _ R
DEC_230 | SUB_232 Ι R
DEC_232 _ DEC_232 _ R
DEC_232 | SUB_234 Λ R
DEC_234 _ DEC_234 _ R
DEC_234 | SUB_236 Ν R
DEC_236 _ DEC_236 _ R
DEC_236 | SUB_238 Ο R
DEC_238 _ DEC_238 _ R
DEC_238 | SUB_240 Ρ R
DEC_24 _ DEC_24 _ R
DEC_24 | SUB_26 ɓ R
DEC_240 _ DEC_240 _ R
DEC_240 | SUB_242 Τ R
DEC_242 _ DEC_242 _ R
DEC_242 | SUB_244 Φ R
DEC_244 _ DEC_244 _ R
DEC_244 | SUB_246 Ψ R
DEC_246 _ DEC_246 _ R
DEC_246 | SUB_248 Ϊ R
DEC_248 _ DEC_248 _ R
DEC_248 | SUB_250 ά R
DEC_250 _ DEC_250 _ R
DEC_250 | SUB_252 ή R
DEC_252 _ DEC_252 _ R
DEC_252 | SUB_254 ΰ R
DEC_26 _ DEC_26 _ R
DEC_26 | SUB_28 ɕ R
DEC_28 _ DEC_28 _ R
DEC_28 | SUB_30 ɗ R
DEC_30 _ DEC_30 _ R
DEC_30 | SUB_32 ə R
DEC_32 _ DEC_32 _ R
DEC_32 | SUB_34 ɛ R
DEC_34 _ DEC_34 _ R
DEC_34 | SUB_36 ɝ R
DEC_36 _ DEC_36 _ R
DEC_36 | SUB_38 ɟ R
DEC_38 _ DEC_38 _ R
DEC_38 | SUB_40 ɡ R
DEC_4 _ DEC_4 _ R
DEC_4 | SUB_6 ȿ R
DEC_40 _ DEC_40 _ R
DEC_40 | SUB_42 ɣ R
DEC_42 _ DEC_42 _ R
DEC_42 | SUB_44 ɥ R
DEC_44 _ DEC_44 _ R
DEC_44 | SUB_46 ɧ R
DEC_46 _ DEC_46 _ R
DEC_46 | SUB_48 ɩ R
DEC_48 _ DEC_48 _ R
DEC_48 | SUB_50 ɫ R
DEC_50 _ DEC_50 _ R
DEC_50 | SUB_52 ɭ R
DEC_52 _ DEC_52 _ R
DEC_52 | SUB_54 ɯ R
DEC_54 _ DEC_54 _ R
DEC_54 | SUB_56 ɱ R
DEC_56 _ DEC_56 _ R
DEC_56 | SUB_58 ɳ R
DEC_58 _ DEC_58 _ R
DEC_58 | SUB_60 ɵ R
DEC_6 _ DEC_6 _ R
DEC_6 | SUB_8 Ɂ R
DEC_60 _ DEC_60 _ R
DEC_60 | SUB_62 ɷ R
DEC_62 _ DEC_62 _ R
DEC_62 | SUB_64 ɹ R
DEC_64 _ DEC_64 _ R
DEC_64 | SUB_66 ɻ R
DEC_66 _ DEC_66 _ R
DEC_66 | SUB_68 ɽ R
DEC_68 _ DEC_68 _ R
DEC_68 | SUB_70 ɿ R
DEC_70 _ DEC_70 _ R
DEC_70 | SUB_72 ʁ R
DEC_72 _ DEC_72 _ R
DEC_72 | SUB_74 ʃ R
DEC_74 _ DEC_74 _ R
DEC_74 | SUB_76 ʅ R
DEC_76 _ DEC_76 _ R
DEC_76 | SUB_78 ʇ R
DEC_78 _ DEC_78 _ R
DEC_78 | SUB_80 ʉ R
DEC_8 _ DEC_8 _ R
DEC_8 | SUB_10 Ƀ R
DEC_80 _ DEC_80 _ R
DEC_80 | SUB_82 ʋ R
DEC_82 _ DEC_82 _ R
DEC_82 | SUB_84 ʍ R
DEC_84 _ DEC_84 _ R
DEC_84 | SUB_86 ʏ R
DEC_86 _ DEC_86 _ R
DEC_86 | SUB_88 ʑ R
DEC_88 _ DEC_88 _ R
DEC_88 | SUB_90 ʓ R
DEC_90 _ DEC_90 _ R
DEC_90 | SUB_92 ʕ R
DEC_92 _ DEC_92 _ R
DEC_92 | SUB_94 ʗ R
DEC_94 _ DEC_94 _ R
DEC_94 | SUB_96 ʙ R
DEC_96 _ DEC_96 _ R
DEC_96 | SUB_98 ʛ R
DEC_98 _ DEC_98 _ R
DEC_98 | SUB_100 ʝ R
DROP_1 _ HALT | L
DROP_10 _ DROP_9 | L
DROP_100 _ DROP_99 | L
DROP_101 _ DROP_100 | L
DROP_102 _ DROP_101 | L
DROP_103 _ DROP_102 | L
DROP_104 _ DROP_103 | L
DROP_105 _ DROP_104 | L
DROP_106 _ DROP_105 | L
DROP_107 _ DROP_106 | L
DROP_108 _ DROP_107 | L
DROP_109 _ DROP_108 | L
DROP_11 _ DROP_10 | L
DROP_110 _ DROP_109 | L
DROP_111 _ DROP_110 | L
DROP_112 _ DROP_111 | L
DROP_113 _ DROP_112 | L
DROP_114 _ DROP_113 | L
DROP_115 _ DROP_114 | L
DROP_116 _ DROP_115 | L
DROP_117 _ DROP_116 | L
DROP_118 _ DROP_117 | L
DROP_119 _ DROP_118 | L
DROP_12 _ DROP_11 | L
DROP_120 _ DROP_119 | L
DROP_121 _ DROP_120 | L
DROP_122 _ DROP_121 | L
DROP_123 _ DROP_122 | L
DROP_124 _ DROP_123 | L
DROP_125 _ DROP_124 | L
DROP_126 _ DROP_125 | L
DROP_13 _ DROP_12 | L
DROP_14 _ DROP_13 | L
DROP_15 _ DROP_14 | L
DROP_16 _ DROP_15 | L
DROP_17 _ DROP_16 | L
DROP_18 _ DROP_17 | L
DROP_19 _ DROP_18 | L
DROP_2 _ DROP_1 | L
DROP_20 _ DROP_19 | L
DROP_21 _ DROP_20 | L
DROP_22 _ DROP_21 | L
DROP_23 _ DROP_22 | L
DROP_24 _ DROP_23 | L
DROP_25 _ DROP_24 | L
DROP_26 _ DROP_25 | L
DROP_27 _ DROP_26 | L
DROP_28 _ DROP_27 | L
DROP_29 _ DROP_28 | L
DROP_3 _ DROP_2 | L
DROP_30 _ DROP_29 | L
DROP_31 _ DROP_30 | L
DROP_32 _ DROP_31 | L
DROP_33 _ DROP_32 | L
DROP_34 _ DROP_33 | L
DROP_35 _ DROP_34 | L
DROP_36 _ DROP_35 | L
DROP_37 _ DROP_36 | L
DROP_38 _ DROP_37 | L
DROP_39 _ DROP_38 | L
DROP_4 _ DROP_3 | L
DROP_40 _ DROP_39 | L
DROP_41 _ DROP_40 | L
DROP_42 _ DROP_41 | L
DROP_43 _ DROP_42 | L
DROP_44 _ DROP_43 | L
DROP_45 _ DROP_44 | L
DROP_46 _ DROP_45 | L
DROP_47 _ DROP_46 | L
DROP_48 _ DROP_47 | L
DROP_49 _ DROP_48 | L
DROP_5 _ DROP_4 | L
DROP_50 _ DROP_49 | L
DROP_51 _ DROP_50 | L
DROP_52 _ DROP_51 | L
DROP_53 _ DROP_52 | L
DROP_54 _ DROP_53 | L
DROP_55 _ DROP_54 | L
DROP_56 _ DROP_55 | L
DROP_57 _ DROP_56 | L
DROP_58 _ DROP_57 | L
DROP_59 _ DROP_58 | L
DROP_6 _ DROP_5 | L
DROP_60 _ DROP_59 | L
DROP_61 _ DROP_60 | L
DROP_62 _ DROP_61 | L
DROP_63 _ DROP_62 | L
DROP_64 _ DROP_63 | L
DROP_65 _ DROP_64 | L
DROP_66 _ DROP_65 | L
DROP_67 _ DROP_66 | L
DROP_68 _ DROP_67 | L
DROP_69 _ DROP_68 | L
DROP_7 _ DROP_6 | L
DROP_70 _ DROP_69 | L
DROP_71 _ DROP_70 | L
DROP_72 _ DROP_71 | L
DROP_73 _ DROP_72 | L
DROP_74 _ DROP_73 | L
DROP_75 _ DROP_74 | L
DROP_76 _ DROP_75 | L
DROP_77 _ DROP_76 | L
DROP_78 _ DROP_77 | L
DROP_79 _ DROP_78 | L
DROP_8 _ DROP_7 | L
DROP_80 _ DROP_79 | L
DROP_81 _ DROP_80 | L
DROP_82 _ DROP_81 | L
DROP_83 _ DROP_82 | L
DROP_84 _ DROP_83 | L
DROP_85 _ DROP_84 | L
DROP_86 _ DROP_85 | L
DROP_87 _ DROP_86 | L
DROP_88 _ DROP_87 | L
DROP_89 _ DROP_88 | L
DROP_9 _ DROP_8 | L
DROP_90 _ DROP_89 | L
DROP_91 _ DROP_90 | L
DROP_92 _ DROP_91 | L
DROP_93 _ DROP_92 | L
DROP_94 _ DROP_93 | L
DROP_95 _ DROP_94 | L
DROP_96 _ DROP_95 | L
DROP_97 _ DROP_96 | L
DROP_98 _ DROP_97 | L
DROP_99 _ DROP_98 | L
FINISH Ȼ HALT | L
FINISH Ƚ DROP_1 | L
FINISH ȿ DROP_2 | L
FINISH Ɂ DROP_3 | L
FINISH Ƀ DROP_4 | L
FINISH Ʌ DROP_5 | L
FINISH ɇ DROP_6 | L
FINISH ɉ DROP_7 | L
FINISH ɋ DROP_8 | L
FINISH ɍ DROP_9 | L
FINISH ɏ DROP_10 | L
FINISH ɑ DROP_11 | L
FINISH ɓ DROP_12 | L
FINISH ɕ DROP_13 | L
FINISH ɗ DROP_14 | L
FINISH ə DROP_15 | L
FINISH ɛ DROP_16 | L
FINISH ɝ DROP_17 | L
FINISH ɟ DROP_18 | L
FINISH ɡ DROP_19 | L
FINISH ɣ DROP_20 | L
FINISH ɥ DROP_21 | L
FINISH ɧ DROP_22 | L
FINISH ɩ DROP_23 | L
FINISH ɫ DROP_24 | L
FINISH ɭ DROP_25 | L
FINISH ɯ DROP_26 | L
FINISH ɱ DROP_27 | L
FINISH ɳ DROP_28 | L
FINISH ɵ DROP_29 | L
FINISH ɷ DROP_30 | L
FINISH ɹ DROP_31 | L
FINISH ɻ DROP_32 | L
FINISH ɽ DROP_33 | L
FINISH ɿ DROP_34 | L
FINISH ʁ DROP_35 | L
FINISH ʃ DROP_36 | L
FINISH ʅ DROP_37 | L
FINISH ʇ DROP_38 | L
FINISH ʉ DROP_39 | L
FINISH ʋ DROP_40 | L
FINISH ʍ DROP_41 | L
FINISH ʏ DROP_42 | L
FINISH ʑ DROP_43 | L
FINISH ʓ DROP_44 | L
FINISH ʕ DROP_45 | L
FINISH ʗ DROP_46 | L
FINISH ʙ DROP_47 | L
FINISH ʛ DROP_48 | L
FINISH ʝ DROP_49 | L
FINISH ʟ DROP_50 | L
FINISH ʡ DROP_51 | L
FINISH ʣ DROP_52 | L
FINISH ʥ DROP_53 | L
FINISH ʧ DROP_54 | L
FINISH ʩ DROP_55 | L
FINISH ʫ DROP_56 | L
FINISH ʭ DROP_57 | L
FINISH ʯ DROP_58 | L
FINISH ʱ DROP_59 | L
FINISH ʳ DROP_60 | L
FINISH ʵ DROP_61 | L
FINISH ʷ DROP_62 | L
FINISH ʹ DROP_63 | L
FINISH ʻ DROP_64 | L
FINISH ʽ DROP_65 | L
FINISH ʿ DROP_66 | L
FINISH ˁ DROP_67 | L
FINISH ˃ DROP_68 | L
FINISH ˅ DROP_69 | L
FINISH ˇ DROP_70 | L
FINISH ˉ DROP_71 | L
FINISH ˋ DROP_72 | L
FINISH ˍ DROP_73 | L
FINISH ˏ DROP_74 | L
FINISH ˑ DROP_75 | L
FINISH ˓ DROP_76 | L
FINISH ˕ DROP_77 | L
FINISH ˗ DROP_78 | L
FINISH ˙ DROP_79 | L
FINISH ˛ DROP_80 | L
FINISH ˝ DROP_81 | L
FINISH ˟ DROP_82 | L
FINISH ˡ DROP_83 | L
FINISH ˣ DROP_84 | L
FINISH ˥ DROP_85 | L
FINISH ˧ DROP_86 | L
FINISH ˩ DROP_87 | L
FINISH ˫ DROP_88 | L
FINISH ˭ DROP_89 | L
FINISH ˯ DROP_90 | L
FINISH ˱ DROP_91 | L
FINISH ˳ DROP_92 | L
FINISH ˵ DROP_93 | L
FINISH ˷ DROP_94 | L
FINISH ˹ DROP_95 | L
FINISH ˻ DROP_96 | L
FINISH ˽ DROP_97 | L
FINISH ˿ DROP_98 | L
FINISH ͱ DROP_99 | L
FINISH ͳ DROP_100 | L
FINISH ͵ DROP_101 | L
FINISH ͷ DROP_102 | L
FINISH ͻ DROP_103 | L
FINISH ͽ DROP_104 | L
FINISH Ϳ DROP_105 | L
FINISH ΅ DROP_106 | L
FINISH · DROP_107 | L
FINISH Ή DROP_108 | L
FINISH Ό DROP_109 | L
FINISH Ώ DROP_110 | L
FINISH Α DROP_111 | L
FINISH Γ DROP_112 | L
FINISH Ε DROP_113 | L
FINISH Η DROP_114 | L
FINISH Ι DROP_115 | L
FINISH Λ DROP_116 | L
FINISH Ν DROP_117 | L
FINISH Ο DROP_118 | L
FINISH Ρ DROP_119 | L
FINISH Τ DROP_120 | L
FINISH Φ DROP_121 | L
FINISH Ψ DROP_122 | L
FINISH Ϊ DROP_123 | L
FINISH ά DROP_124 | L
FINISH ή DROP_125 | L
FINISH ΰ DROP_126 | L
INC _ INC _ L
INC Ȼ DEC_2 _ R
INC Ƚ DEC_4 _ R
INC ȿ DEC_6 _ R
INC Ɂ DEC_8 _ R
INC Ƀ DEC_10 _ R
INC Ʌ DEC_12 _ R
INC ɇ DEC_14 _ R
INC ɉ DEC_16 _ R
INC ɋ DEC_18 _ R
INC ɍ DEC_20 _ R
INC ɏ DEC_22 _ R
INC ɑ DEC_24 _ R
INC ɓ DEC_26 _ R
INC ɕ DEC_28 _ R
INC ɗ DEC_30 _ R
INC ə DEC_32 _ R
INC ɛ DEC_34 _ R
INC ɝ DEC_36 _ R
INC ɟ DEC_38 _ R
INC ɡ DEC_40 _ R
INC ɣ DEC_42 _ R
INC ɥ DEC_44 _ R
INC ɧ DEC_46 _ R
INC ɩ DEC_48 _ R
INC ɫ DEC_50 _ R
INC ɭ DEC_52 _ R
INC ɯ DEC_54 _ R
INC ɱ DEC_56 _ R
INC ɳ DEC_58 _ R
INC ɵ DEC_60 _ R
INC ɷ DEC_62 _ R
INC ɹ DEC_64 _ R
INC ɻ DEC_66 _ R
INC ɽ DEC_68 _ R
INC ɿ DEC_70 _ R
INC ʁ DEC_72 _ R
INC ʃ DEC_74 _ R
INC ʅ DEC_76 _ R
INC ʇ DEC_78 _ R
INC ʉ DEC_80 _ R
INC ʋ DEC_82 _ R
INC ʍ DEC_84 _ R
INC ʏ DEC_86 _ R
INC ʑ DEC_88 _ R
INC ʓ DEC_90 _ R
INC ʕ DEC_92 _ R
INC ʗ DEC_94 _ R
INC ʙ DEC_96 _ R
INC ʛ DEC_98 _ R
INC ʝ DEC_100 _ R
INC ʟ DEC_102 _ R
INC ʡ DEC_104 _ R
INC ʣ DEC_106 _ R
INC ʥ DEC_108 _ R
INC ʧ DEC_110 _ R
INC ʩ DEC_112 _ R
INC ʫ DEC_114 _ R
INC ʭ DEC_116 _ R
INC ʯ DEC_118 _ R
INC ʱ DEC_120 _ R
INC ʳ DEC_122 _ R
INC ʵ DEC_124 _ R
INC ʷ DEC_126 _ R
INC ʹ DEC_128 _ R
INC ʻ DEC_130 _ R
INC ʽ DEC_132 _ R
INC ʿ DEC_134 _ R
INC ˁ DEC_136 _ R
INC ˃ DEC_138 _ R
INC ˅ DEC_140 _ R
INC ˇ DEC_142 _ R
INC ˉ DEC_144 _ R
INC ˋ DEC_146 _ R
INC ˍ DEC_148 _ R
INC ˏ DEC_150 _ R
INC ˑ DEC_152 _ R
INC ˓ DEC_154 _ R
INC ˕ DEC_156 _ R
INC ˗ DEC_158 _ R
INC ˙ DEC_160 _ R
INC ˛ DEC_162 _ R
INC ˝ DEC_164 _ R
INC ˟ DEC_166 _ R
INC ˡ DEC_168 _ R
INC ˣ DEC_170 _ R
INC ˥ DEC_172 _ R
INC ˧ DEC_174 _ R
INC ˩ DEC_176 _ R
INC ˫ DEC_178 _ R
INC ˭ DEC_180 _ R
INC ˯ DEC_182 _ R
INC ˱ DEC_184 _ R
INC ˳ DEC_186 _ R
INC ˵ DEC_188 _ R
INC ˷ DEC_190 _ R
INC ˹ DEC_192 _ R
INC ˻ DEC_194 _ R
INC ˽ DEC_196 _ R
INC ˿ DEC_198 _ R
INC ͱ DEC_200 _ R
INC ͳ DEC_202 _ R
INC ͵ DEC_204 _ R
INC ͷ DEC_206 _ R
INC ͻ DEC_208 _ R
INC ͽ DEC_210 _ R
INC Ϳ DEC_212 _ R
INC ΅ DEC_214 _ R
INC · DEC_216 _ R
INC Ή DEC_218 _ R
INC Ό DEC_220 _ R
INC Ώ DEC_222 _ R
INC Α DEC_224 _ R
INC Γ DEC_226 _ R
INC Ε DEC_228 _ R
INC Η DEC_230 _ R
INC Ι DEC_232 _ R
INC Λ DEC_234 _ R
INC Ν DEC_236 _ R
INC Ο DEC_238 _ R
INC Ρ DEC_240 _ R
INC Τ DEC_242 _ R
INC Φ DEC_244 _ R
INC Ψ DEC_246 _ R
INC Ϊ DEC_248 _ R
INC ά DEC_250 _ R
INC ή DEC_252 _ R
INIT | SUB_2 Ȼ R
SUB_1 | INC _ L
SUB_10 _ FINISH _ L
SUB_10 | SUB_9 _ R
SUB_100 _ FINISH _ L
SUB_100 | SUB_99 _ R
SUB_101 | SUB_100 _ R
SUB_102 _ FINISH _ L
SUB_102 | SUB_101 _ R
SUB_103 | SUB_102 _ R
SUB_104 _ FINISH _ L
SUB_104 | SUB_103 _ R
SUB_105 | SUB_104 _ R
SUB_106 _ FINISH _ L
SUB_106 | SUB_105 _ R
SUB_107 | SUB_106 _ R
SUB_108 _ FINISH _ L
SUB_108 | SUB_107 _ R
SUB_109 | SUB_108 _ R
SUB_11 | SUB_10 _ R
SUB_110 _ FINISH _ L
SUB_110 | SUB_109 _ R
SUB_111 | SUB_110 _ R
SUB_112 _ FINISH _ L
SUB_112 | SUB_111 _ R
SUB_113 | SUB_112 _ R
SUB_114 _ FINISH _ L
SUB_114 | SUB_113 _ R
SUB_115 | SUB_114 _ R
SUB_116 _ FINISH _ L
SUB_116 | SUB_115 _ R
SUB_117 | SUB_116 _ R
SUB_118 _ FINISH _ L
SUB_118 | SUB_117 _ R
SUB_119 | SUB_118 _ R
SUB_12 _ FINISH _ L
SUB_12 | SUB_11 _ R
SUB_120 _ FINISH _ L
SUB_120 | SUB_119 _ R
SUB_121 | SUB_120 _ R
SUB_122 _ FINISH _ L
SUB_122 | SUB_121 _ R
SUB_123 | SUB_122 _ R
SUB_124 _ FINISH _ L
SUB_124 | SUB_123 _ R
SUB_125 | SUB_124 _ R
SUB_126 _ FINISH _ L
SUB_126 | SUB_125 _ R
SUB_127 | SUB_126 _ R
SUB_128 _ FINISH _ L
SUB_128 | SUB_127 _ R
SUB_129 | SUB_128 _ R
SUB_13 | SUB_12 _ R
SUB_130 _ FINISH _ L
SUB_130 | SUB_129 _ R
SUB_131 | SUB_130 _ R
SUB_132 _ FINISH _ L
SUB_132 | SUB_131 _ R
SUB_133 | SUB_132 _ R
SUB_134 _ FINISH _ L
SUB_134 | SUB_133 _ R
SUB_135 | SUB_134 _ R
SUB_136 _ FINISH _ L
SUB_136 | SUB_135 _ R
SUB_137 | SUB_136 _ R
SUB_138 _ FINISH _ L
SUB_138 | SUB_137 _ R
SUB_139 | SUB_138 _ R
SUB_14 _ FINISH _ L
SUB_14 | SUB_13 _ R
SUB_140 _ FINISH _ L
SUB_140 | SUB_139 _ R
SUB_141 | SUB_140 _ R
SUB_142 _ FINISH _ L
SUB_142 | SUB_141 _ R
SUB_143 | SUB_142 _ R
SUB_144 _ FINISH _ L
SUB_144 | SUB_143 _ R
SUB_145 | SUB_144 _ R
SUB_146 _ FINISH _ L
SUB_146 | SUB_145 _ R
SUB_147 | SUB_146 _ R
SUB_148 _ FINISH _ L
SUB_148 | SUB_147 _ R
SUB_149 | SUB_148 _ R
SUB_15 | SUB_14 _ R
SUB_150 _ FINISH _ L
SUB_150 | SUB_149 _ R
SUB_151 | SUB_150 _ R
SUB_152 _ FINISH _ L
SUB_152 | SUB_151 _ R
SUB_153 | SUB_152 _ R
SUB_154 _ FINISH _ L
SUB_154 | SUB_153 _ R
SUB_155 | SUB_154 _ R
SUB_156 _ FINISH _ L
SUB_156 | SUB_155 _ R
SUB_157 | SUB_156 _ R
SUB_158 _ FINISH _ L
SUB_158 | SUB_157 _ R
SUB_159 | SUB_158 _ R
SUB_16 _ FINISH _ L
SUB_16 | SUB_15 _ R
SUB_160 _ FINISH _ L
SUB_160 | SUB_159 _ R
SUB_161 | SUB_160 _ R
SUB_162 _ FINISH _ L
SUB_162 | SUB_161 _ R
SUB_163 | SUB_162 _ R
SUB_164 _ FINISH _ L
SUB_164 | SUB_163 _ R
SUB_165 | SUB_164 _ R
SUB_166 _ FINISH _ L
SUB_166 | SUB_165 _ R
SUB_167 | SUB_166 _ R
SUB_168 _ FINISH _ L
SUB_168 | SUB_167 _ R
SUB_169 | SUB_168 _ R
SUB_17 | SUB_16 _ R
SUB_170 _ FINISH _ L
SUB_170 | SUB_169 _ R
SUB_171 | SUB_170 _ R
SUB_172 _ FINISH _ L
SUB_172 | SUB_171 _ R
SUB_173 | SUB_172 _ R
SUB_174 _ FINISH _ L
SUB_174 | SUB_173 _ R
SUB_175 | SUB_174 _ R
SUB_176 _ FINISH _ L
SUB_176 | SUB_175 _ R
SUB_177 | SUB_176 _ R
SUB_178 _ FINISH _ L
SUB_178 | SUB_177 _ R
SUB_179 | SUB_178 _ R
SUB_18 _ FINISH _ L
SUB_18 | SUB_17 _ R
SUB_180 _ FINISH _ L
SUB_180 | SUB_179 _ R
SUB_181 | SUB_180 _ R
SUB_182 _ FINISH _ L
SUB_182 | SUB_181 _ R
SUB_183 | SUB_182 _ R
SUB_184 _ FINISH _ L
SUB_184 | SUB_183 _ R
SUB_185 | SUB_184 _ R
SUB_186 _ FINISH _ L
SUB_186 | SUB_185 _ R
SUB_187 | SUB_186 _ R
SUB_188 _ FINISH _ L
SUB_188 | SUB_187 _ R
SUB_189 | SUB_188 _ R
SUB_19 | SUB_18 _ R
SUB_190 _ FINISH _ L
SUB_190 | SUB_189 _ R
SUB_191 | SUB_190 _ R
SUB_192 _ FINISH _ L
SUB_192 | SUB_191 _ R
SUB_193 | SUB_192 _ R
SUB_194 _ FINISH _ L
SUB_194 | SUB_193 _ R
SUB_195 | SUB_194 _ R
SUB_196 _ FINISH _ L
SUB_196 | SUB_195 _ R
SUB_197 | SUB_196 _ R
SUB_198 _ FINISH _ L
SUB_198 | SUB_197 _ R
SUB_199 | SUB_198 _ R
SUB_2 _ FINISH _ L
SUB_2 | SUB_1 _ R
SUB_20 _ FINISH _ L
SUB_20 | SUB_19 _ R
SUB_200 _ FINISH _ L
SUB_200 | SUB_199 _ R
SUB_201 | SUB_200 _ R
SUB_202 _ FINISH _ L
SUB_202 | SUB_201 _ R
SUB_203 | SUB_202 _ R
SUB_204 _ FINISH _ L
SUB_204 | SUB_203 _ R
SUB_205 | SUB_204 _ R
SUB_206 _ FINISH _ L
SUB_206 | SUB_205 _ R
SUB_207 | SUB_206 _ R
SUB_208 _ FINISH _ L
SUB_208 | SUB_207 _ R
SUB_209 | SUB_208 _ R
SUB_21 | SUB_20 _ R
SUB_210 _ FINISH _ L
SUB_210 | SUB_209 _ R
SUB_211 | SUB_210 _ R
SUB_212 _ FINISH _ L
SUB_212 | SUB_211 _ R
SUB_213 | SUB_212 _ R
SUB_214 _ FINISH _ L
SUB_214 | SUB_213 _ R
SUB_215 | SUB_214 _ R
SUB_216 _ FINISH _ L
SUB_216 | SUB_215 _ R
SUB_217 | SUB_216 _ R
SUB_218 _ FINISH _ L
SUB_218 | SUB_217 _ R
SUB_219 | SUB_218 _ R
SUB_22 _ FINISH _ L
SUB_22 | SUB_21 _ R
SUB_220 _ FINISH _ L
SUB_220 | SUB_219 _ R
SUB_221 | SUB_220 _ R
SUB_222 _ FINISH _ L
SUB_222 | SUB_221 _ R
SUB_223 | SUB_222 _ R
SUB_224 _ FINISH _ L
SUB_224 | SUB_223 _ R
SUB_225 | SUB_224 _ R
SUB_226 _ FINISH _ L
SUB_226 | SUB_225 _ R
SUB_227 | SUB_226 _ R
SUB_228 _ FINISH _ L
SUB_228 | SUB_227 _ R
SUB_229 | SUB_228 _ R
SUB_23 | SUB_22 _ R
SUB_230 _ FINISH _ L
SUB_230 | SUB_229 _ R
SUB_231 | SUB_230 _ R
SUB_232 _ FINISH _ L
SUB_232 | SUB_231 _ R
SUB_233 | SUB_232 _ R
SUB_234 _ FINISH _ L
SUB_234 | SUB_233 _ R
SUB_235 | SUB_234 _ R
SUB_236 _ FINISH _ L
SUB_236 | SUB_235 _ R
SUB_237 | SUB_236 _ R
SUB_238 _ FINISH _ L
SUB_238 | SUB_237 _ R
SUB_239 | SUB_238 _ R
SUB_24 _ FINISH _ L
SUB_24 | SUB_23 _ R
SUB_240 _ FINISH _ L
SUB_240 | SUB_239 _ R
SUB_241 | SUB_240 _ R
SUB_242 _ FINISH _ L
SUB_242 | SUB_241 _ R
SUB_243 | SUB_242 _ R
SUB_244 _ FINISH _ L
SUB_244 | SUB_243 _ R
SUB_245 | SUB_244 _ R
SUB_246 _ FINISH _ L
SUB_246 | SUB_245 _ R
SUB_247 | SUB_246 _ R
SUB_248 _ FINISH _ L
SUB_248 | SUB_247 _ R
SUB_249 | SUB_248 _ R
SUB_25 | SUB_24 _ R
SUB_250 _ FINISH _ L
SUB_250 | SUB_249 _ R
SUB_251 | SUB_250 _ R
SUB_252 _ FINISH _ L
SUB_252 | SUB_251 _ R
SUB_253 | SUB_252 _ R
SUB_254 _ FINISH _ L
SUB_254 | SUB_253 _ R
SUB_255 | SUB_254 _ R
SUB_26 _ FINISH _ L
SUB_26 | SUB_25 _ R
SUB_27 | SUB_26 _ R
SUB_28 _ FINISH _ L
SUB_28 | SUB_27 _ R
SUB_29 | SUB_28 _ R
SUB_3 | SUB_2 _ R
SUB_30 _ FINISH _ L
SUB_30 | SUB_29 _ R
SUB_31 | SUB_30 _ R
SUB_32 _ FINISH _ L
SUB_32 | SUB_31 _ R
SUB_33 | SUB_32 _ R
SUB_34 _ FINISH _ L
SUB_34 | SUB_33 _ R
SUB_35 | SUB_34 _ R
SUB_36 _ FINISH _ L
SUB_36 | SUB_35 _ R
SUB_37 | SUB_36 _ R
SUB_38 _ FINISH _ L
SUB_38 | SUB_37 _ R
SUB_39 | SUB_38 _ R
SUB_4 _ FINISH _ L
SUB_4 | SUB_3 _ R
SUB_40 _ FINISH _ L
SUB_40 | SUB_39 _ R
SUB_41 | SUB_40 _ R
SUB_42 _ FINISH _ L
SUB_42 | SUB_41 _ R
SUB_43 | SUB_42 _ R
SUB_44 _ FINISH _ L
SUB_44 | SUB_43 _ R
SUB_45 | SUB_44 _ R
SUB_46 _ FINISH _ L
SUB_46 | SUB_45 _ R
SUB_47 | SUB_46 _ R
SUB_48 _ FINISH _ L
SUB_48 | SUB_47 _ R
SUB_49 | SUB_48 _ R
SUB_5 | SUB_4 _ R
SUB_50 _ FINISH _ L
SUB_50 | SUB_49 _ R
SUB_51 | SUB_50 _ R
SUB_52 _ FINISH _ L
SUB_52 | SUB_51 _ R
SUB_53 | SUB_52 _ R
SUB_54 _ FINISH _ L
SUB_54 | SUB_53 _ R
SUB_55 | SUB_54 _ R
SUB_56 _ FINISH _ L
SUB_56 | SUB_55 _ R
SUB_57 | SUB_56 _ R
SUB_58 _ FINISH _ L
SUB_58 | SUB_57 _ R
SUB_59 | SUB_58 _ R
SUB_6 _ FINISH _ L
SUB_6 | SUB_5 _ R
SUB_60 _ FINISH _ L
SUB_60 | SUB_59 _ R
SUB_61 | SUB_60 _ R
SUB_62 _ FINISH _ L
SUB_62 | SUB_61 _ R
SUB_63 | SUB_62 _ R
SUB_64 _ FINISH _ L
SUB_64 | SUB_63 _ R
SUB_65 | SUB_64 _ R
SUB_66 _ FINISH _ L
SUB_66 | SUB_65 _ R
SUB_67 | SUB_66 _ R
SUB_68 _ FINISH _ L
SUB_68 | SUB_67 _ R
SUB_69 | SUB_68 _ R
SUB_7 | SUB_6 _ R
SUB_70 _ FINISH _ L
SUB_70 | SUB_69 _ R
SUB_71 | SUB_70 _ R
SUB_72 _ FINISH _ L
SUB_72 | SUB_71 _ R
SUB_73 | SUB_72 _ R
SUB_74 _ FINISH _ L
SUB_74 | SUB_73 _ R
SUB_75 | SUB_74 _ R
SUB_76 _ FINISH _ L
SUB_76 | SUB_75 _ R
SUB_77 | SUB_76 _ R
SUB_78 _ FINISH _ L
SUB_78 | SUB_77 _ R
SUB_79 | SUB_78 _ R
SUB_8 _ FINISH _ L
SUB_8 | SUB_7 _ R
SUB_80 _ FINISH _ L
SUB_80 | SUB_79 _ R
SUB_81 | SUB_80 _ R
SUB_82 _ FINISH _ L
SUB_82 | SUB_81 _ R
SUB_83 | SUB_82 _ R
SUB_84 _ FINISH _ L
SUB_84 | SUB_83 _ R
SUB_85 | SUB_84 _ R
SUB_86 _ FINISH _ L
SUB_86 | SUB_85 _ R
SUB_87 | SUB_86 _ R
SUB_88 _ FINISH _ L
SUB_88 | SUB_87 _ R
SUB_89 | SUB_88 _ R
SUB_9 | SUB_8 _ R
SUB_90 _ FINISH _ L
SUB_90 | SUB_89 _ R
SUB_91 | SUB_90 _ R
SUB_92 _ FINISH _ L
SUB_92 | SUB_91 _ R
SUB_93 | SUB_92 _ R
SUB_94 _ FINISH _ L
SUB_94 | SUB_93 _ R
SUB_95 | SUB_94 _ R
SUB_96 _ FINISH _ L
SUB_96 | SUB_95 _ R
SUB_97 | SUB_96 _ R
SUB_98 _ FINISH _ L
SUB_98 | SUB_97 _ R
SUB_99 | SUB_98 _ R
"#;

const INPUT_TAPE: &str = "||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||";

fn run_rust_benchmark(c: &mut Criterion) {
    let transitions = rust_parse_rules(RULES).unwrap();
    let mut tm = RustLogicMill::new(
        transitions,
        "INIT",
        "HALT",
        '_'
    ).unwrap();

    c.bench_function("Rust Implementation", |b| {
        b.iter(|| {
            // black_box prevents the compiler from optimizing away the function call
            tm.run(black_box(INPUT_TAPE.to_string()), black_box(1_000_000), false)
        })
    });
}

fn run_python_benchmark(c: &mut Criterion) {
    // MODIFIED: Removed the call to the non-existent `prepare_interpreter`.
    // Python::with_gil handles initialization automatically.
    Python::initialize();
    Python::attach(|py| {
        // Add the current directory to Python's sys.path to find logic_mill.py
        // MODIFIED: Changed `import_bound` to the modern `import`
        let sys = py.import("sys").unwrap();
        let path = sys.getattr("path").unwrap();
        path.call_method1("append", (".",)).unwrap();

        // Import the Python module and the LogicMill class
        // MODIFIED: Changed `import_bound` to the modern `import`
        let logic_mill_module = py.import("logic_mill").unwrap();
        let py_logic_mill_class = logic_mill_module.getattr("LogicMill").unwrap();
        let py_parse_rules = logic_mill_module.getattr("parse_transition_rules").unwrap();

        // Parse rules using the Python function
        let transitions = py_parse_rules.call1((RULES,)).unwrap();

        // Instantiate the Python LogicMill
        let kwargs = PyDict::new(py);
        kwargs.set_item("initial_state", "INIT").unwrap();
        kwargs.set_item("halt_state", "HALT").unwrap();
        kwargs.set_item("blank_symbol", '_').unwrap();
        
        let tm = py_logic_mill_class
            .call((transitions,), Some(&kwargs))
            .unwrap();

        c.bench_function("Python Implementation", |b| {
            b.iter(|| {
                // Call the 'run' method on the Python object
                tm.call_method1(
                    "run",
                    (black_box(INPUT_TAPE), black_box(1_000_000)),
                )
                .unwrap();
            })
        });
    });
}

// Define the benchmark group
criterion_group!(benches, run_rust_benchmark, run_python_benchmark);
// Generate the main function to run the benchmarks
criterion_main!(benches);
